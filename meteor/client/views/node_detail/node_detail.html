<!--
~ Copyright 2015 Concept
~
~ Licensed under the Apache License, Version 2.0 (the "License");
~ you may not use this file except in compliance with the License.
~ You may obtain a copy of the License at
~
~ http://www.apache.org/licenses/LICENSE-2.0
~
~ Unless required by applicable law or agreed to in writing, software
~ distributed under the License is distributed on an "AS IS" BASIS,
~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
~ See the License for the specific language governing permissions and
~ limitations under the License.
-->

<!--
Edit information about a reference.
-->
<template name="NodeDetail">
	<h3>Rediger referanse</h3>

  {{#autoForm collection="GV.collections.Nodes" id="update-node-form" doc=node type="update"}}
		{{> afQuickField name="title" }}
		{{> afQuickField name="status" }}
		{{> afQuickField name="description" rows="6" }}
		{{> afQuickField name="tags" }}

    <div class="row" style="margin-bottom:20px;">
      <div class="col-xs-12">
        <div class="row" style="margin-bottom:20px;">
          <div class="col-xs-12">
            {{!-- Upload process status --}}
            {{#with file}}
                {{#if this.isUploaded}}
                <b><a href="#" class="download">{{this.name}}</a></b> er opplastet og lagt ved referansen. {{#FS.DeleteButton class="btn btn-danger btn-xs"}}Slett{{/FS.DeleteButton}}

                {{else}}

                  Laster opp <b>{{this.name}}</b>...

                  {{> FS.UploadProgressBar bootstrap=true class='progress-bar-success progress-bar-striped active' showPercent=true}}

                  {{#unless uploadStopped}}
                    <button type="button" class="btn btn-info pull-right stop-upload">Stopp opplastning</button>
                  {{else}}
                    <button type="button" class="btn btn-info pull-right resume-upload">Fortsett opplastning</button>
                  {{/unless}}
                {{/if}}
            {{/with}}
          </div>
        </div>
        {{!-- Upload field --}}
        {{#unless file}}
          <div class="upload-field">
            <span>Klikk for å laste opp fil</span>
            <input class="file-upload pull-left" type="file">
          </div>
        {{else}}
          {{#if uploadStopped}}
          <div class="upload-field">
            <span>Klikk for å bytte fil</span>
            <input class="file-upload pull-left" type="file">
          </div>
          {{/if}}
        {{/unless}}

      </div>
    </div>
    <div class="form-group">
			<button type="button" class="btn btn-danger pull-left delete-reference">Slett referansen</button>
			<button type="submit" class="btn btn-primary pull-right {{#if file}}{{#unless uploadStopped}}{{#unless file.isUploaded}}disabled{{/unless}}{{/unless}}{{/if}}">Lagre</button>
			<button type="button" class="btn btn-default pull-right cancel" style="margin-right:10px;">Avbryt</button>
		</div>
	{{/autoForm}}
</template>

<!--
Edit top level information about a document. This is basically the root node.
-->
<template name="GeneralInfo">
	<h3>Generelt om dokumentet</h3>
  <p><em>Denne noden beskriver dokumentet som helhet. Denne informasjonen brukes for å lett kunne finne dokumentet ved en seinere anledning.</em></p>

	{{#autoForm collection="GV.collections.Documents" id="update-document-form" doc=this type="update"}}
		{{> afQuickField name="title" }}
		{{> afQuickField name="status" }}
		{{> afQuickField name="summary" rows="6" }}
		{{> afQuickField name="tags" }}

		<div class="form-group">
			<button type="button" class="btn btn-danger pull-left delete-document">Slett hele dokumentet</button>
			<button type="submit" class="btn btn-primary pull-right">Lagre</button>
			<button type="button" class="btn btn-default pull-right cancel" style="margin-right:10px;">Avbryt</button>
		</div>
	{{/autoForm}}
</template>
