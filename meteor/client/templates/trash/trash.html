<!--
~ Copyright 2015 Concept
~
~ Licensed under the Apache License, Version 2.0 (the "License");
~ you may not use this file except in compliance with the License.
~ You may obtain a copy of the License at
~
~ http://www.apache.org/licenses/LICENSE-2.0
~
~ Unless required by applicable law or agreed to in writing, software
~ distributed under the License is distributed on an "AS IS" BASIS,
~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
~ See the License for the specific language governing permissions and
~ limitations under the License.
-->

<!--
This is the trash can which contain all softly removed documents and templates.
-->
<template name="Trash">
	<div class="container default-container">
    <div class="row">
      <div>
        <h3>
          <span class="glyphicon glyphicon-tree-conifer"></span> Papirkurv
        </h3>
      </div>

      {{> TrashTableContainer data=this.trash tableName='trash'}}
    </div>
	</div>
</template>


<!--
The documents table.
-->
<template name="TrashTableContainer">
  {{> TrashActionsDropdown class="pull-right" tableName=this.tableName}}

	<div class="row table-wrapper">
		<div class="col-xs-12">
		{{> TrashTable heading="Dokumenter" documents=data.documents tableName=this.tableName id="documents" emptyText="Ingen dokumenter i papirkurven"}}
		{{> TrashTable heading="Maler" documents=data.templates tableName=this.tableName id="templates" emptyText="Ingen maler i papirkurven"}}
		</div>
	</div>
</template>

<template name="TrashTable">
	<div class="panel panel-default">
		<div class="panel-heading"><b>{{heading}}</b></div>

		<!-- Table -->
		<table class="table table-hover {{tableName}}" id="{{id}}">
			<thead>
				<tr>
					<th><input type="checkbox" class="checkbox-master" aria-label="..."></th>
					<th style="min-width:200px;">Navn</th>
					<th>Opprettet</th>
					<th>Sist endret</th>
					<th>Slettet</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				{{#each documents}}
					{{> TrashRow document=this tableName=../tableName}}
				{{else}}
					<div class="no-results-row">
						{{emptyText}}...
					</div>
				{{/each}}
			</tbody>
		</table>
	</div>
</template>

<!--
A row in the documents table.
-->
<template name="TrashRow">
	<tr class="table-row">
    <td class="row-item"><input type="checkbox" class="checkbox" aria-label="..."></td>
		<td class="row-item">{{document.title}}</td>
    <td class="row-item">{{formatDateRelative document.createdOn}}</td>
		<td class="row-item">{{formatDateRelative document.lastChanged}}</td>
    <td class="row-item">{{formatDateRelative document.removedAt}}</td>
		<td>
			<div class="btn-group pull-right">
				<button type="button" class="btn btn-default btn-sm recover">
					<span class="glyphicon glyphicon-repeat"></span> Gjenopprett
				</button>
				<button type="button" class="btn btn-danger btn-sm remove">
					<span class="glyphicon glyphicon-trash"></span> Slett
				</button>
			</div>
		</td>
	</tr>
</template>

<!--
The actions that can be applied to the elements in the document table
-->
<template name="TrashActionsDropdown">
  <div class="btn-group dropdown {{class}}">
    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
      Velg handling <span class="caret"></span>
    </button>
    <ul class="dropdown-menu" role="menu">
      <li class="{{isDisabledOnNone}}"><a href="#" class="recover"><span class="glyphicon glyphicon-repeat"></span> Gjenopprett</a></li>
      <li class="{{isDisabledOnNone}}"><a href="#" class="remove"><span class="glyphicon glyphicon-trash"></span> Slett</a></li>
    </ul>
  </div>
</template>
